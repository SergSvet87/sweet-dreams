import React from 'react';
import Link from 'next/link';
import Image from 'next/image';
import classNames from 'classnames';
import ReactStars from 'react-rating-stars-component';

import { Count } from '../count/Count';

import styles from './product-card.module.css';

export default function ProductCard({ item }) {
  const ratingChanged = newRating => {
    console.log(newRating);
  };

  return (
    <article className={styles.product}>
      {item.isSale ? (
        <div className={styles.product__sale}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="40"
            viewBox="0 0 40 40"
            fill="none"
          >
            <path
              d="M9.16634 11.6668C8.5033 11.6668 7.86741 11.4034 7.39857 10.9346C6.92973 10.4658 6.66634 9.82987 6.66634 9.16683C6.66634 8.50379 6.92973 7.8679 7.39857 7.39906C7.86741 6.93022 8.5033 6.66683 9.16634 6.66683C9.82938 6.66683 10.4653 6.93022 10.9341 7.39906C11.4029 7.8679 11.6663 8.50379 11.6663 9.16683C11.6663 9.82987 11.4029 10.4658 10.9341 10.9346C10.4653 11.4034 9.82938 11.6668 9.16634 11.6668ZM35.683 19.3002L20.683 4.30016C20.083 3.70016 19.2497 3.3335 18.333 3.3335H6.66634C4.81634 3.3335 3.33301 4.81683 3.33301 6.66683V18.3335C3.33301 19.2502 3.69967 20.0835 4.31634 20.6835L19.2997 35.6835C19.9163 36.2835 20.7497 36.6668 21.6663 36.6668C22.583 36.6668 23.4163 36.2835 24.0163 35.6835L35.683 24.0168C36.2997 23.4168 36.6663 22.5835 36.6663 21.6668C36.6663 20.7335 36.283 19.9002 35.683 19.3002Z"
              fill="#FF0000"
            />
            <path
              d="M11.8264 16.3088C11.5262 16.0156 11.304 15.698 11.1595 15.356C11.0192 15.0179 10.9715 14.6818 11.0162 14.3477C11.061 14.0135 11.207 13.7098 11.4542 13.4367L12.3793 14.3403C12.2228 14.5331 12.1509 14.7363 12.1638 14.9499C12.1807 15.1675 12.2879 15.3726 12.4853 15.5654C12.6867 15.7622 12.8902 15.8684 13.0956 15.8841C13.305 15.8957 13.4843 15.8215 13.6335 15.6618C13.7552 15.5314 13.8163 15.386 13.8167 15.2256C13.8171 15.0652 13.7793 14.9037 13.7033 14.741C13.6353 14.5781 13.526 14.3668 13.3754 14.1071C13.1743 13.75 13.0227 13.4451 12.9205 13.1925C12.8264 12.9398 12.7921 12.6691 12.8178 12.3807C12.8515 12.092 12.998 11.8089 13.2572 11.5314C13.5006 11.2707 13.7764 11.1059 14.0845 11.0369C14.3926 10.968 14.7089 10.9955 15.0334 11.1195C15.3618 11.2393 15.674 11.4437 15.97 11.7329C16.4141 12.1666 16.6698 12.6294 16.7371 13.1213C16.8125 13.613 16.6801 14.0706 16.3397 14.4939L15.39 13.5663C15.5231 13.4069 15.5752 13.2206 15.5463 13.0074C15.5254 12.7941 15.4183 12.593 15.2251 12.4043C15.0565 12.2396 14.8796 12.1512 14.6944 12.1392C14.5132 12.1311 14.3441 12.2111 14.187 12.3793C14.0771 12.4971 14.0218 12.632 14.0212 12.7842C14.0287 12.9362 14.0643 13.0916 14.1282 13.2505C14.2001 13.4092 14.3094 13.6205 14.4561 13.8843C14.6572 14.2415 14.8068 14.5485 14.9051 14.8053C15.0033 15.062 15.0377 15.3368 15.0081 15.6295C14.9784 15.9221 14.836 16.2051 14.5808 16.4784C14.3609 16.7139 14.0971 16.8743 13.7893 16.9597C13.4816 17.0451 13.1557 17.0363 12.8116 16.9333C12.4714 16.8262 12.143 16.618 11.8264 16.3088Z"
              fill="white"
            />
            <path
              d="M17.5625 20.2229L15.848 18.5483L14.7809 19.1101L13.8743 18.2246L19.5396 15.3278L20.5449 16.3097L17.9756 22.2304L17.0628 21.3389L17.5625 20.2229ZM17.9879 19.2876L19.0849 16.8375L16.7421 18.0708L17.9879 19.2876Z"
              fill="white"
            />
            <path
              d="M20.0715 22.9388L21.49 24.3243L20.8362 25.0244L18.5542 22.7956L22.6656 18.3931L23.529 19.2365L20.0715 22.9388Z"
              fill="white"
            />
            <path
              d="M25.6942 22.714L24.6634 23.8178L26.1127 25.2333L25.4589 25.9334L24.0096 24.5179L22.9199 25.6847L24.5542 27.281L23.8827 28L21.385 25.5604L25.5022 21.1516L28 23.5913L27.3285 24.3103L25.6942 22.714Z"
              fill="white"
            />
          </svg>
        </div>
      ) : null}
      <Image
        className={styles.product__img}
        src={item.src || '/images/products/card_1.png'}
        alt={item.title}
        width={168}
        height={191}
        priority
      />

      <Link href={`/product/${item.id}`}>
        <h2 className={styles.product__title}>{item.title}</h2>
      </Link>

      <p className={styles.product__count}>{item.count}</p>

      <div className={styles.product__favorite}>
        <ReactStars
          classNames={styles.product__rating}
          activeColor="#ffc06d"
          count={5}
          size={18}
          isHalf={true}
          emptyIcon={
            <svg
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M8.00985 2.04754L9.03651 4.10087C9.17651 4.38671 9.54985 4.66087 9.86485 4.71337L11.7257 5.02254C12.9157 5.22087 13.1957 6.08421 12.3382 6.93587L10.8915 8.38254C10.6465 8.62754 10.5123 9.10004 10.5882 9.43837L11.0023 11.2292C11.329 12.6467 10.5765 13.195 9.32235 12.4542L7.57818 11.4217C7.26318 11.235 6.74401 11.235 6.42318 11.4217L4.67901 12.4542C3.43068 13.195 2.67235 12.6409 2.99901 11.2292L3.41318 9.43837C3.48901 9.10004 3.35485 8.62754 3.10985 8.38254L1.66318 6.93587C0.811513 6.08421 1.08568 5.22087 2.27568 5.02254L4.13651 4.71337C4.44568 4.66087 4.81901 4.38671 4.95901 4.10087L5.98568 2.04754C6.54568 0.933372 7.45568 0.933372 8.00985 2.04754Z"
                fill="white"
                stroke="#C8C9CB"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          }
          halfIcon={
            <svg
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M7.84188 1.83563L8.86854 3.88896C9.00854 4.17479 9.38188 4.44896 9.69688 4.50146L11.5577 4.81063C12.7477 5.00896 13.0277 5.87229 12.1702 6.72396L10.7235 8.17063C10.4785 8.41563 10.3444 8.88813 10.4202 9.22646L10.8344 11.0173C11.161 12.4348 10.4085 12.9831 9.15438 12.2423L7.41021 11.2098C7.09521 11.0231 6.57604 11.0231 6.25521 11.2098L4.51104 12.2423C3.26271 12.9831 2.50438 12.429 2.83104 11.0173L3.24521 9.22646C3.32104 8.88813 3.18688 8.41563 2.94188 8.17063L1.49521 6.72396C0.643544 5.87229 0.917711 5.00896 2.10771 4.81063L3.96854 4.50146C4.27771 4.44896 4.65104 4.17479 4.79104 3.88896L5.81771 1.83563C6.37771 0.721458 7.28771 0.721458 7.84188 1.83563Z"
                fill="white"
                stroke="#C8C9CB"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M7 1.01957C6.57974 0.92127 6.14056 1.19329 5.81771 1.83563L4.79104 3.88896C4.65104 4.17479 4.27771 4.44896 3.96854 4.50146L2.10771 4.81063C0.917711 5.00896 0.643544 5.87229 1.49521 6.72396L2.94188 8.17063C3.18688 8.41563 3.32104 8.88813 3.24521 9.22646L2.83104 11.0173C2.50438 12.429 3.26271 12.9831 4.51104 12.2423L6.25521 11.2098C6.45809 11.0918 6.74028 11.0484 7 11.0796V1.01957Z"
                fill="#FFC06D"
              />
              <path
                d="M5.81771 1.83563L5.14759 1.49881L5.14689 1.50021L5.81771 1.83563ZM7 1.01957H7.75C7.75 0.671162 7.51007 0.368633 7.17082 0.289281L7 1.01957ZM4.79104 3.88896L4.1202 3.55354L4.1175 3.55906L4.79104 3.88896ZM3.96854 4.50146L4.09147 5.24132L4.09411 5.24087L3.96854 4.50146ZM2.10771 4.81063L1.98479 4.07077L1.98441 4.07083L2.10771 4.81063ZM1.49521 6.72396L0.96488 7.25429L0.964881 7.25429L1.49521 6.72396ZM2.94188 8.17063L3.47221 7.6403L3.47221 7.6403L2.94188 8.17063ZM3.24521 9.22646L3.97594 9.39546L3.97705 9.39049L3.24521 9.22646ZM2.83104 11.0173L3.56174 11.1864L3.56176 11.1863L2.83104 11.0173ZM4.51104 12.2423L4.12899 11.5969L4.12828 11.5973L4.51104 12.2423ZM6.25521 11.2098L5.87803 10.5615L5.87315 10.5644L6.25521 11.2098ZM7 11.0796L6.91042 11.8242C7.1234 11.8499 7.33716 11.7831 7.49765 11.6407C7.65814 11.4984 7.75 11.2941 7.75 11.0796H7ZM6.48783 2.17244C6.61066 1.92805 6.72583 1.81585 6.79024 1.77264C6.80532 1.76251 6.81659 1.75682 6.82375 1.75373C6.83082 1.75068 6.83443 1.74991 6.83483 1.74983C6.83512 1.74977 6.83384 1.75003 6.83164 1.75C6.82943 1.74997 6.82841 1.74968 6.82918 1.74986L7.17082 0.289281C6.24206 0.0720415 5.53025 0.737478 5.14759 1.49881L6.48783 2.17244ZM5.46186 4.22437L6.48853 2.17104L5.14689 1.50021L4.12022 3.55355L5.46186 4.22437ZM4.09411 5.24087C4.3958 5.18964 4.67441 5.04497 4.88993 4.88517C5.10537 4.72543 5.32742 4.49892 5.46459 4.21886L4.1175 3.55906C4.11839 3.55723 4.11105 3.57194 4.08727 3.5986C4.06438 3.62426 4.03344 3.65288 3.99653 3.68025C3.95963 3.70761 3.92296 3.72912 3.89127 3.74387C3.85829 3.75922 3.84144 3.76231 3.84298 3.76204L4.09411 5.24087ZM2.23063 5.55048L4.09147 5.24132L3.84562 3.7616L1.98479 4.07077L2.23063 5.55048ZM2.02554 6.19363C1.69271 5.8608 1.76228 5.71291 1.75029 5.75044C1.73808 5.78868 1.76611 5.6279 2.23101 5.55042L1.98441 4.07083C1.25931 4.19168 0.555256 4.56174 0.321378 5.29415C0.0877277 6.02584 0.446043 6.73545 0.96488 7.25429L2.02554 6.19363ZM3.47221 7.6403L2.02554 6.19363L0.964881 7.25429L2.41155 8.70096L3.47221 7.6403ZM3.97705 9.39049C4.04894 9.06977 4.01485 8.73644 3.9349 8.45714C3.85504 8.17818 3.7071 7.87519 3.47221 7.6403L2.41155 8.70095C2.42165 8.71106 2.4633 8.76682 2.49282 8.86995C2.52224 8.97273 2.51732 9.04481 2.51337 9.06243L3.97705 9.39049ZM3.56176 11.1863L3.97592 9.39545L2.5145 9.05747L2.10033 10.8483L3.56176 11.1863ZM4.12828 11.5973C3.87373 11.7484 3.6914 11.8042 3.58301 11.8177C3.48105 11.8305 3.48435 11.8033 3.5225 11.8311C3.56074 11.859 3.53614 11.8708 3.51741 11.7706C3.49746 11.6639 3.49518 11.474 3.56174 11.1864L2.10035 10.8482C1.92144 11.6213 1.94688 12.5383 2.63834 13.0428C3.32922 13.547 4.21052 13.2928 4.89381 12.8873L4.12828 11.5973ZM5.87315 10.5644L4.12899 11.5969L4.8931 12.8877L6.63727 11.8552L5.87315 10.5644ZM7.08958 10.335C6.70784 10.289 6.25307 10.3433 5.87804 10.5615L6.63238 11.8581C6.66311 11.8402 6.77272 11.8077 6.91042 11.8242L7.08958 10.335ZM7.75 11.0796V1.01957H6.25V11.0796H7.75Z"
                fill="#FFC06D"
              />
            </svg>
          }
          fullIcon={
            <svg
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M8.00985 2.04754L9.03651 4.10087C9.17651 4.38671 9.54985 4.66087 9.86485 4.71337L11.7257 5.02254C12.9157 5.22087 13.1957 6.08421 12.3382 6.93587L10.8915 8.38254C10.6465 8.62754 10.5123 9.10004 10.5882 9.43837L11.0023 11.2292C11.329 12.6467 10.5765 13.195 9.32235 12.4542L7.57818 11.4217C7.26318 11.235 6.74401 11.235 6.42318 11.4217L4.67901 12.4542C3.43068 13.195 2.67235 12.6409 2.99901 11.2292L3.41318 9.43837C3.48901 9.10004 3.35485 8.62754 3.10985 8.38254L1.66318 6.93587C0.811513 6.08421 1.08568 5.22087 2.27568 5.02254L4.13651 4.71337C4.44568 4.66087 4.81901 4.38671 4.95901 4.10087L5.98568 2.04754C6.54568 0.933372 7.45568 0.933372 8.00985 2.04754Z"
                fill="#FFC06D"
                stroke="#FFC06D"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          }
          onChange={ratingChanged}
        />

        {/* <div class={styles.product__rating} aria-label={`Rating is ${item.rating} out of 5`}>
          <div class={classNames(styles.rating__item, styles.rating__active)} data-rate="1"></div>
          <div class={styles.rating__item} data-rate="2"></div>
          <div class={styles.rating__item} data-rate="3"></div>
          <div class={styles.rating__item} data-rate="4"></div>
          <div class={styles.rating__item} data-rate="5"></div>
        </div> */}

        <div className={styles.product__like}>
          <img className={styles.like__img} src="/images/shop/heart.svg" alt="Heart Icon" />
        </div>
      </div>

      {item.isSale ? (
        <div className={styles.product__price}>
          <span className={styles.product__price_sale}>₴{item.newPrice}</span>
          <span className={styles.product__price_was}>was ₴{item.price}</span>
        </div>
      ) : (
        <div className={styles.product__price}>₴{item.price}</div>
      )}

      <div className={styles.product__footer}>
        <Count id={item.id} count={item.quantity} />

        <button className={styles.product__add} type="button">
          <img src="/images/shop/cart.svg" alt="Cart Icon" />
        </button>
      </div>
    </article>
  );
}
